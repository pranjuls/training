<!DOCTYPE html>
<html>

<head>
    <title>Promise test</title>
</head>

<body>
  
</body>
<script type="text/javascript">
let delay = (t) => {
    return new Promise((resolve, reject) => {
        let num = Math.random();
        setTimeout(function() {
            resolve(num);
        }, t);
    });
}

document.onreadystatechange = () => {
    if (document.readyState == 'complete') {

        delay(2000)
        	.then(val=> {console.log(val); return delay(1500); })
        	.then(x=> {console.log(x);throw new Error('error is nothing');})
        	.catch(e => console.log(e));
    }
}
</script>

</html>